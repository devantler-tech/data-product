@using Microsoft.Extensions.Options;
@using Devantler.DataProduct.Configuration.Options;
@using  Devantler.DataProduct.Configuration.Options.FeatureFlags;

@inject IOptions<DataProductOptions> Options

<Card Background="Background.Light" Margin=Margin.Is4.FromBottom>
    <CardBody>
        <CardTitle Size="3">
            Features
        </CardTitle>
        <CardText>
            <ListGroup>
                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.Rest) ? Color.Success : Color.Danger)">
                    <FeatureDetails FeatureName=@($"{nameof(ApiFeatureFlagValues.Rest)} API")
                        IsEnabled=Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.Rest) />
                </ListGroupItem>

                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.GraphQL) ? Color.Success : Color.Danger)">
                    <FeatureDetails FeatureName=@($"{nameof(ApiFeatureFlagValues.GraphQL)} API")
                        IsEnabled=Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.GraphQL) />
                </ListGroupItem>

                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.gRPC) ? Color.Success : Color.Warning)">
                    <FeatureDetails FeatureName=@($"{nameof(ApiFeatureFlagValues.gRPC)} API (Not supported yet)")
                        IsEnabled=Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.gRPC) />
                </ListGroupItem>

                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableAuth ? Color.Success : Color.Danger)">
                    <FeatureDetails FeatureName=@($"{nameof(Options.Value.FeatureFlags.EnableAuth).Replace("Enable", "")}")
                        IsEnabled=Options.Value.FeatureFlags.EnableAuth />
                </ListGroupItem>

                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableCaching ? Color.Success : Color.Danger)">
                    <FeatureDetails FeatureName=@($"{nameof(Options.Value.FeatureFlags.EnableCaching).Replace("Enable", "")}")
                        IsEnabled=Options.Value.FeatureFlags.EnableCaching />
                </ListGroupItem>

                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableInputs ? Color.Success : Color.Danger)">
                    <FeatureDetails FeatureName=@($"{nameof(Options.Value.FeatureFlags.EnableInputs).Replace("Enable", "")}")
                        IsEnabled=Options.Value.FeatureFlags.EnableInputs />
                </ListGroupItem>
  
                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableOutputs ? Color.Success : Color.Danger)">
                    <FeatureDetails FeatureName=@($"{nameof(Options.Value.FeatureFlags.EnableOutputs).Replace("Enable", "")}")
                        IsEnabled=Options.Value.FeatureFlags.EnableOutputs />
                </ListGroupItem>

                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableDataCatalog ? Color.Success : Color.Danger)">
                    <FeatureDetails FeatureName=@($"{nameof(Options.Value.FeatureFlags.EnableDataCatalog).Replace("Enable", "")}")
                        IsEnabled=Options.Value.FeatureFlags.EnableDataCatalog />
                </ListGroupItem>
                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableTelemetry ? Color.Success : Color.Danger)">
                    <FeatureDetails FeatureName=@($"{nameof(Options.Value.FeatureFlags.EnableTelemetry).Replace("Enable", "")}")
                        IsEnabled=Options.Value.FeatureFlags.EnableTelemetry />
                </ListGroupItem>
                <ListGroupItem
                    Color="@(Options.Value.FeatureFlags.EnableWebhooks ? Color.Success : Color.Warning)">
                    <FeatureDetails FeatureName=@($"{nameof(Options.Value.FeatureFlags.EnableWebhooks).Replace("Enable", "")} (Not supported yet)")
                        IsEnabled=Options.Value.FeatureFlags.EnableWebhooks />
                </ListGroupItem>
            </ListGroup>
        </CardText>
    </CardBody>
</Card>