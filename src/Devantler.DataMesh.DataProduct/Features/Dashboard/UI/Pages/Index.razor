@using Microsoft.Extensions.Options;
@using Devantler.DataMesh.DataProduct.Configuration.Options;
@using Devantler.DataMesh.DataProduct.Configuration.Options.FeatureFlags;

@inject IOptions<DataProductOptions> Options

@page "/"

<PageTitle>Home</PageTitle>

<Container Padding=Padding.Is4 Fluid>
    <Row>
        <Column ColumnSize="ColumnSize.Is8">
            <Card>
                <CardBody>
                    <CardTitle Size="1">
                        Welcome to your @Options.Value.Name's Dashboard!
                    </CardTitle>
                    <CardText>
                        On this page you can find an overview of the features that are enabled for your data product,
                        and links to the various services that are available from your data product.
                    </CardText>
                </CardBody>
            </Card>
        </Column>
        <Column ColumnSize="ColumnSize.Is4">
            <Card>
                <CardBody>
                    <CardTitle Size="3">
                        Feature overview
                    </CardTitle>
                    <CardText>
                        <ListGroup>
                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.Rest) ? Color.Success : Color.Danger)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Rest API
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.Rest))
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>
                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.GraphQL) ? Color.Success : Color.Danger)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        GraphQL API
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if
                                        (Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.GraphQL))
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>
                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.gRPC) ? Color.Success : Color.Warning)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        gRPC API (Not supported yet)
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableApis.Contains(ApiFeatureFlagValues.gRPC))
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>
                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableAuthentication ? Color.Success : Color.Warning)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Authentication (Not supported yet)
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableAuthentication)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableAuthorisation ? Color.Success : Color.Warning)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Authorization (Not supported yet)
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableAuthorisation)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableCaching ? Color.Success : Color.Danger)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Caching
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableCaching)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                    @if (Options.Value.FeatureFlags.EnableCaching)
                                    {
                                        <Column ColumnSize="ColumnSize.Is12">
                                            <Text TextWeight=TextWeight.Bold>@Options.Value.CacheStore.Type</Text>
                                        </Column>
                                    }
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableDashboard ? Color.Success : Color.Danger)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Dashboard
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableDashboard)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableDataEgestion ? Color.Success : Color.Warning)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Data Egestion (Not supported yet)
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableDataEgestion)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableDataIngestion ? Color.Success : Color.Danger)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Data Ingestion
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableDataIngestion)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                    @if (Options.Value.FeatureFlags.EnableDataIngestion)
                                    {
                                        <Column ColumnSize="ColumnSize.Is12">
                                            <Text TextWeight=TextWeight.Bold>@string.Join(", ",
                                            Options.Value.DataIngestors.Select(x => x.Type))</Text>
                                        </Column>
                                    }
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableMetadata ? Color.Success : Color.Warning)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Metadata (Not supported yet)
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableMetadata)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableMetrics ? Color.Success : Color.Warning)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Metrics (Not supported yet)
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableMetrics)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableTracing ? Color.Success : Color.Warning)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Tracing (Not supported yet)
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableTracing)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>

                            <ListGroupItem
                                Color="@(Options.Value.FeatureFlags.EnableWebhooks ? Color.Success : Color.Warning)">
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is10">
                                        Webhooks (Not supported yet)
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is2">
                                        @if (Options.Value.FeatureFlags.EnableWebhooks)
                                        {
                                            <Icon Name=IconName.Check />
                                        }
                                        else
                                        {
                                            <Icon Name=IconName.Times />
                                        }
                                    </Column>
                                </Row>
                            </ListGroupItem>

                        </ListGroup>
                    </CardText>
                </CardBody>
            </Card>
        </Column>
    </Row>
</Container>
